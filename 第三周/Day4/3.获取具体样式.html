<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style type="text/css">
        * {
            margin: 0;
            padding: 0;
        }

        #outer {
            width: 200px;
            height: 200px;
            background-color: #80ff45;
            color: green;
            margin: 120px 0 0 200px;
            padding: 44px;
            border: 2px solid #fa4339;
            opacity: 0.3;
            filter: alpha(opacity=70);
        }

        #outer:after {
            content: 'ni hao';
            color: red;
        }
    </style>
</head>
<body>
<div id="outer" style="width: 400px">
</div>
<script type="text/javascript">
    var outer = document.getElementById('outer');
    //    console.log(outer.clientWidth); // 无法获取具体样式
    //    console.log(outer.style.padding); // 只能获取行内

    // window.getComputedStyle 获取的样式 是所有经过浏览器计算过渲染到页面的为准
    //    console.log(window.getComputedStyle(outer, null/* 伪类*/)['width']); // 返回值 是关于当前元素 样式属性集合 它是CSSStyleDeclaration的一个实例对象

    // 获取关于伪类的样式属性
    //    console.log(window.getComputedStyle(outer, ':after').content);
    //    console.log(window.getComputedStyle(outer, ':after').color);
    // 获取关于当前元素的属性
    //    console.log(window.getComputedStyle(outer, null).color);

    // window.getComputedStyle 在 IE 6-8 不兼容 currentStyle
    //    console.log(outer.currentStyle.width);

    function getCss(curEle, attr) {
        var val;
        if ("getComputedStyle" in window) {
            val = window.getComputedStyle(curEle, null)[attr];
        } else { // IE 6-8 以下 
            // 如果获取透明度 需要以filter设置的透明度值为主
            if (attr === 'opacity') {
                val = curEle.currentStyle['filter'];
                // alpha(opacity=70.123) sepia(1)
                var reg = /alpha\(opacity=((?:\d|[1-9]\d+)(?:\.\d+)?)\)/;
                var temp = reg.exec(val);
                val = temp ? temp[1] / 100 : 1; // 如果捕获到就将第一个分组返回否则 说明没有设置透明度 就返回 默认值 1
            } else {
                val = curEle.currentStyle[attr];
            }

        }
        // 将一些获取到的 样式数值 去掉单位
        // 100px 10rem 10em 20pt '0.3'  'block' 'red'
        reg = /^[+-]?(\d|[1-9]\d+)(\.\d+)?(px|rem|em|pt)?$/;
//        if(reg.test(val)){
//          val = parseFloat(val);
//        }
//        return val;
        return reg.test(val) ? parseFloat(val) : val;
    }
    // console.log(getCss(outer, 'opacity'));
    console.log(getCss(outer, 'width'));
</script>
</body>
</html>